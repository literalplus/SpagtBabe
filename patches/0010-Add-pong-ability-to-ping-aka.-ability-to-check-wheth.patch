From 90ce7dd3b55fb9c639e675322b98049d4d40ed1e Mon Sep 17 00:00:00 2001
From: xxyy <devnull@nowak-at.net>
Date: Mon, 14 Apr 2014 18:48:59 +0200
Subject: [PATCH 10/12] Add pong-ability to +ping (aka. ability to check
 whether the bot is up)

---
 plugins/ping.py | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

diff --git a/plugins/ping.py b/plugins/ping.py
index 66286df..850556c 100644
--- a/plugins/ping.py
+++ b/plugins/ping.py
@@ -9,8 +9,8 @@ from util import hook
 ping_regex = re.compile(r"(\d+.\d+)/(\d+.\d+)/(\d+.\d+)/(\d+.\d+)")
 
 
-@hook.command
-def ping(inp, reply=None):
+@hook.command(autohelp=False)
+def ping(inp, reply=None, action=None, nick=None):
     """ping <host> [count] -- Pings <host> [count] times."""
 
     if os.name == "nt":
@@ -18,6 +18,11 @@ def ping(inp, reply=None):
         # TODO: Rewrite this entire command to work on Windows, somehow
 
     args = inp.split(' ')
+
+    if args[0] == "" or args[0] == "-":
+        action("throws a big ping-pong ball at {}'s head.".format(nick))
+        return
+
     host = args[0]
 
     # check for a second argument and set the ping count
-- 
2.1.3

